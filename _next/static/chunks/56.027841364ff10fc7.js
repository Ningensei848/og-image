"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{56:function(a,b,c){c.r(b),c.d(b,{"default":function(){return B}});var d=c(5893),e=c(7294);c(9545);var f=c(1163),g=c(7563),h=function(){var a=(0,f.useRouter)().asPath,b=new URLSearchParams(a.replace(/^.*?\?/,"")),c=(0,g.parse)(b.toString()||""),d=Array.isArray(c.tags)?c.tags.join(", "):c.tags,h=(0,e.useState)(c.fileType||"png"),i=h[0],j=h[1],k=(0,e.useState)(c.theme||"light"),l=k[0],m=k[1],n=(0,e.useState)(c.timestamp||new Date().toUTCString().split(/\s/).slice(2,4).join(".")),o=n[0],p=n[1],q=(0,e.useState)(c.title||"**Hello** World"),r=q[0],s=q[1],t=(0,e.useState)(d||""),u=t[0],v=t[1],w=(0,e.useState)(c.copyright||""),x=w[0],y=w[1],z=(0,e.useState)(c.logo||"https://assets.vercel.com/image/upload/front/assets/design/vercel-triangle-".concat("light"===l?"black":"white",".svg")),A=z[0],B=z[1],C=(0,e.useState)(c.avater||""),D=C[0],E=C[1],F=(0,e.useState)(c.author||""),G=F[0],H=F[1],I=(0,e.useState)(c.aka||""),J=I[0],K=I[1],L=(0,e.useState)(c.site||""),M=L[0],N=L[1];return{fileType:i,setFileType:j,theme:l,setTheme:m,timestamp:o,setTimestamp:p,title:r,setTitle:s,tags:u,setTags:v,copyright:x,setCopyright:y,logo:A,setLogo:B,avater:D,setAvater:E,author:G,setAuthor:H,aka:J,setAka:K,site:M,setSite:N}},i=c(8100),j=function(a){return fetch(a,{mode:"cors",redirect:"follow"}).then(function(a){return a.ok&&200===a.status})},k=function(a){var b=(0,i.ZP)(a,j,{refreshInterval:2000}),c=b.data,d=b.error;return{isLoading:!d&&!c,isError:d}},l=function(){return(0,d.jsx)("div",{className:"loader-wrap",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",background:"lightgray"},children:(0,d.jsx)("div",{className:"loader"})})},m=function(){return(0,d.jsx)("div",{children:(0,d.jsx)("p",{children:"failed to load"})})},n=function(a){var b=a.src,c=a.setToast,e=a.onClick,f=k(b),g=f.isLoading,h=f.isError;return g?(0,d.jsx)(l,{}):h?(c({show:!0,message:"Oops, an error occurred"}),(0,d.jsx)(m,{})):(0,d.jsx)("a",{className:"image-wrapper",href:b,onClick:e,children:(0,d.jsx)("img",{id:"og-image",src:b,alt:"Preview of the generated img",title:"Click to copy image URL to clipboard"})})},o=function(a){var b=a.show,c=a.message;return(0,d.jsx)("div",{className:"toast-area",children:(0,d.jsx)("div",{className:"toast-outer",style:{transform:b?"translate3d(0,-0px,-0px) scale(1)":""},children:(0,d.jsx)("div",{className:"toast-inner",children:(0,d.jsx)("div",{className:"toast-message",children:c})})})})},p=function(a){var b=a.label,c=a.input;return(0,d.jsx)("div",{className:"field",children:(0,d.jsxs)("label",{children:[(0,d.jsx)("div",{className:"field-label",children:b}),(0,d.jsx)("div",{className:"field-value",children:c})]})})},q=function(a){var b=a.options,c=a.value,e=a.onChange,f=a.small;return(0,d.jsxs)("div",{className:f?"select-wrapper small":"select-wrapper",children:[(0,d.jsx)("select",{value:c,onChange:function(a){return e(a.target.value)},children:b.map(function(a,b){return(0,d.jsx)("option",{value:a.value,children:a.text},"".concat(b,"-").concat(a.value))})}),(0,d.jsx)("div",{className:f?"select-arrow small":"select-arrow",children:"▼"})]})},r=function(a){var b=a.type,c=a.value,e=a.onInput;return(0,d.jsx)("div",{className:"input-outer-wrapper",children:(0,d.jsx)("div",{className:"input-inner-wrapper",children:(0,d.jsx)("input",{type:void 0===b?"text":b,value:c,onInput:function(a){return e(a.target.value)}})})})},s=[{text:"Light",value:"light"},{text:"Dark",value:"dark"}],t=[{text:"PNG",value:"png"},{text:"JPEG",value:"jpeg"}],u=/https:\/\/assets\.vercel\.com\/image\/upload\/front\/assets\/design\/vercel-triangle-(white|black)\.svg/i,v=function(a){var b=a.theme,c=a.setTheme,e=a.logo,f=a.setLogo;return(0,d.jsx)(p,{label:"Theme",input:(0,d.jsx)(q,{options:s,value:b,onChange:function(a){c(a),u.test(e)&&f("https://assets.vercel.com/image/upload/front/assets/design/vercel-triangle-".concat("dark"===a?"white":"black",".svg"))}})})},w=function(a){var b=a.fileType,c=a.setFileType;return(0,d.jsx)(p,{label:"File Type",input:(0,d.jsx)(q,{options:t,value:b,onChange:function(a){return c(a)}})})},x=function(a){var b=a.type,c=a.label,f=a.state,g=a.setState,h=(0,e.useState)(f),i=h[0],j=h[1];return(0,e.useEffect)(function(){var a=setTimeout(function(){console.log("onInput "+i),g(i)},650);return function(){return clearTimeout(a)}},[i]),(0,d.jsx)(p,{label:c,input:(0,d.jsx)(r,{type:b,value:i,onInput:function(a){j(a)}})})};function y(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var z=function(a){var b=a.setState,c=h(),f=c.fileType,g=c.setFileType,i=c.theme,j=c.setTheme,k=c.timestamp,l=c.setTimestamp,m=c.title,n=c.setTitle,o=c.tags,p=c.setTags,q=c.copyright,r=c.setCopyright,s=c.logo,t=c.setLogo,u=c.avater,y=c.setAvater,z=c.author,A=c.setAuthor,B=c.aka,C=c.setAka,D=c.site,E=c.setSite;return(0,e.useEffect)(function(){var a,c=new URLSearchParams({theme:i,timestamp:k,title:m,tags:o,copyright:q,logo:s,avater:u,author:z,aka:B,site:D}),d=new URL("".concat(window.location.protocol,"//").concat("custom-og-image-generator.vercel.app"));d.pathname="/".concat("api","/").concat(encodeURIComponent(m),".").concat(f),c.delete("title"),o.length&&(c.delete("tags"),console.log(void 0===o?"undefined":(a=o)&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a),console.log(o),o.split(/[,，\s]+/).map(function(a){return c.append("tags",a)})),d.search=c.toString(),c.forEach(function(a,b){a.length||d.searchParams.delete(b)}),console.log("url is set ".concat(d.href)),b(d.href)},[B,z,u,q,f,s,D,o,i,k,m]),(0,d.jsx)("div",{className:"pull-left",children:(0,d.jsxs)("div",{children:[(0,d.jsx)(v,{theme:i,setTheme:j,logo:s,setLogo:t}),(0,d.jsx)(w,{fileType:f,setFileType:g}),(0,d.jsx)(x,{state:k,setState:l,label:"Timestamp"}),(0,d.jsx)(x,{state:m,setState:n,label:"Title"}),(0,d.jsx)(x,{state:o,setState:p,label:"Tags"}),(0,d.jsx)(x,{state:q,setState:r,label:"Copyright"}),(0,d.jsx)(x,{state:s,setState:t,label:"Logo",type:"url"}),(0,d.jsx)(x,{state:u,setState:y,label:"Avater URL",type:"url"}),(0,d.jsx)(x,{state:z,setState:A,label:"Author name"}),(0,d.jsx)(x,{state:B,setState:C,label:"Alt name"}),(0,d.jsx)(x,{state:D,setState:E,label:"Site name"})]})})},A=function(a){var b=a.src,c=a.setToast;return(0,d.jsx)("div",{className:"pull-right",children:(0,d.jsx)(n,{src:b,setToast:c,onClick:function(a){a.preventDefault(),navigator.clipboard.writeText(b).then(function(){c({show:!0,message:"Copied image URL to clipboard"}),setTimeout(function(){return c({show:!1,message:""})},3000),console.log("Async: Copying to clipboard was successful!")},function(a){window.open(b,"_blank"),console.error("Async: Could not copy text: ",a)})}})})},B=function(a){var b=a.source,c=a.setSource,f=(0,e.useState)({show:!1,message:""}),g=f[0],h=f[1];return(0,d.jsxs)("div",{className:"split",children:[(0,d.jsx)(z,{setState:c}),(0,d.jsx)(A,{src:b,setToast:h}),(0,d.jsx)(o,function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){y(a,b,c[b])})}return a}({},g))]})}}}])